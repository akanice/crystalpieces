function bindingGalleryClickEvent(){$(".product-image-item").unbind("click");$(".product-image-item").bind("click",function(e){e.preventDefault();var productStatusWrapper=$("#produc-status-wrapper-yith-wcbm-badge-custom").html();$("#main-image").empty();$("#main-image").append('<a id="main-image-a0" href="'+$(this).data("image-url")+'">'+
'<img id="main-image-img0" class="product-main-image" data-thumbnail-image="'+$(this).data("thumb-url")+'" src="'+$(this).data("thumb-url")+'" alt="'+$(this).data("title")+'">'+
'<div id="produc-status-wrapper-yith-wcbm-badge-custom" class="wrapper-yith-wcbm-badge-custom">'+
productStatusWrapper+
'</div>'+
'</a>');return false;});}
(function(){$(document).ready(function(){$(document).on('click','.artkey-carousel-button-btn-next-wrapper',function(){var numberItems=parseInt($(this).data('number-items'));var numberIndex=parseInt($(this).data('number-index'));if((numberIndex+3)<numberItems){numberIndex=numberIndex+1;$(this).data('number-index',numberIndex);$('.artkey-carousel-button-btn-prev-wrapper').data('number-index',numberIndex);$('.artkey-carousel-thumbnail').css({transform:'translate(0px, '+(numberIndex*-90)+'px)'});}});$(document).on('click','.artkey-carousel-button-btn-prev-wrapper',function(){var numberIndex=parseInt($(this).data('number-index'));if(numberIndex>0){numberIndex=numberIndex-1;$(this).data('number-index',numberIndex);$('.artkey-carousel-button-btn-next-wrapper').data('number-index',numberIndex);$('.artkey-carousel-thumbnail').css({transform:'translate(0px, '+(numberIndex*-90)+'px)'});}});bindingGalleryClickEvent();$(document).on('click','.product-detail-page-production-option',function(){var checkSvg='<svg x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32">'+
'<path stroke-dasharray="19.79 19.79" stroke-dashoffset="19.79" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="square" stroke-miterlimit="10" d="M9,17l3.9,3.9c0.1,0.1,0.2,0.1,0.3,0L23,11" style="stroke-dashoffset: 19.79;"></path>'+
'</svg>';function update_main_image(link,thumb,title){var productStatusWrapper=$("#produc-status-wrapper-yith-wcbm-badge-custom").html();$("#main-image").empty();$("#main-image").append('<a id="main-image-a0" href="'+link+'">'+
'<img id="main-image-img0" class="product-main-image" data-thumbnail-image="'+link+'" src="'+link+'" alt="'+title+'">'+
'<div id="produc-status-wrapper-yith-wcbm-badge-custom" class="wrapper-yith-wcbm-badge-custom">'+
productStatusWrapper+
'</div>'+
'</a>');}
function get_product_images(producTitle,id,priceText,token,url,current_total,number_of_keycaps){var productOptionNameOrderNow='<strong>'+producTitle+'</strong>'+': '+current_total+' keycaps'
if(current_total>0||productType==3){var productOptionNameText='<strong>'+producTitle+'</strong>'+': '+number_of_keycaps+' keycaps total';disableAddToCart=false;if(number_of_keycaps<=0){productOptionNameText='<strong>'+producTitle+'</strong>';}
$("#productOptionName").html(productOptionNameText);$(".order-now-header-left").html(productOptionNameOrderNow);if(productType==3){$(".availability").html("FCFS");}else{$(".availability").html(current_total);}
$("#btnAddtocart").removeClass("btn-gray");$("#btnAddtocart").addClass("btn-yellow add-to-card-ef");$("#btnAddtocart").html("ADD TO CART "+checkSvg);}else{disableAddToCart=true;$("#productOptionName").html("<strike>"+producTitle+"</strike>");$(".order-now-header-left").html("<strike>"+productOptionNameOrderNow+"</strike>");$(".availability").html("0");$("#btnAddtocart").removeClass("btn-yellow add-to-card-ef");$("#btnAddtocart").html("CHOOSE OPTION");$("#btnAddtocart").addClass("btn-gray");}
if(current_total<=0){$(".lb-in-stock").html("Out of stock");}else{$(".lb-in-stock").html("In stock");}
$("#productPrice").text(priceText);$("#product_id").val(id);$(".productOptions").children('li').each(function(){this.className='inline-list-item product-detail-page-production-option';});$productOptionIDElement=$("#productOption"+id);$('.product-detail-page-production-option').data('product-option-selected',false);$('.div-image-option-icon').removeClass('active');if(!productOptionSelected){selectOption=true;$productOptionIDElement.find('.div-image-option-icon').addClass('active');$productOptionIDElement.data('product-option-selected',true);url=url+"?id="+id;}else{selectOption=false;$productOptionIDElement.find('.div-image-option-icon').remove('active');$productOptionIDElement.data('product-option-selected',false);url=url+"?id="+mainImageProductId;disableAddToCart=true;$("#productOptionName").html("<strong>AVAILABLE COLORS</strong>");$(".order-now-header-left").html("<strong>AVAILABLE COLORS</strong>");$("#btnAddtocart").removeClass("btn-yellow add-to-card-ef");$("#btnAddtocart").addClass("btn-gray");$("#btnAddtocart").text("CHOOSE OPTION");$(".availability").html($("#parentTotalInstock").val());}
productOptionSelected=!productOptionSelected;$.post(url,{"_token":token},function(data){var dataListLength=data.list.length;if(data.list&&dataListLength==0){return;}
var $_popupGallery=$("#popup-gallery");var $_carouselPrev=$("#carousel-prev");var $_carouselNext=$("#carousel-next");$_popupGallery.empty();$_carouselPrev.empty();$_carouselNext.empty();if(dataListLength>0){update_main_image(data.list[0].link,data.list[0].link,data.list[0].title);if(dataListLength>4){$_carouselPrev.append('<span class="icon icon-arrows-up"></span>');}
for(var i=0;i<dataListLength;i++){var j=i+1;$_popupGallery.append('<div data-carousel-thumbnail="'+i+'" class="artkey-carousel-thumbnail post-prev-img" style="transform: translate(0px, 0px);">'+
'<a class="product-image-item" href="'+data.list[i].link+'" data-image-url="'+data.list[i].link+'" data-thumb-url="'+data.list[i].link+'" data-title="'+data.list[i].title+'" data-index="'+(i+1)+'"><img src="'+data.list[i].link+'" alt="'+data.list[i].title+'" title="'+data.list[i].title+'"/></a>'+
'</div>')}
if(dataListLength>4){$_carouselNext.append('<span class="icon icon-arrows-down"></span>');}
$("#jssor_1").empty();var newSlide=updateMainSlider(data.list);$("#jssor_1").append(newSlide);setTimeout(function(){jssor_1_slider_init();});bindingGalleryClickEvent();}});}
function updateSizeOptions(sizeOptions){var result='<select style="color: #ffffff;" class="size-options my-custom-select" id="size_options" required name="size_options">';for(var i=0;i<sizeOptions.length;i++){result+='<option style="color: black" value="'+sizeOptions[i]+'">'+sizeOptions[i]+'</option>';}
result+='</select>';$('#size_options_wrapper').html(result);}
var productTitle=$(this).data('product-option-title');var id=$(this).data('product-option-id');var priceText=$(this).data('product-option-price');var token=$('#csrf-token-product-detail-page').val();var url=$(this).data('product-option-url');var current_total=$(this).data('product-option-current-total');var number_of_keycaps=$(this).data('product-option-number-of-keycaps');var productType=$(this).data('product-option-type');var mainImageProductId=$(this).data('product-main-id');var productOptionSelected=$(this).data('product-option-selected');get_product_images(productTitle,id,priceText,token,url,current_total,number_of_keycaps);if(productOptionSelected){var sizeOptions=$(this).data('product-option-sizes');if(sizeOptions){var sizeOptionsArr=sizeOptions.split(',');if(sizeOptionsArr&&sizeOptionsArr.length>0){updateSizeOptions(sizeOptionsArr);}}else{var sizeOptions=$(this).data('product-option-main-sizes');if(sizeOptions){var sizeOptionsArr=sizeOptions.split(',');if(sizeOptionsArr&&sizeOptionsArr.length>0){updateSizeOptions(sizeOptionsArr);}}}}else{var sizeOptions=$(this).data('product-option-main-sizes');if(sizeOptions){var sizeOptionsArr=sizeOptions.split(',');if(sizeOptionsArr&&sizeOptionsArr.length>0){updateSizeOptions(sizeOptionsArr);}}}});$(document).on('click','.section-header-collapse-expand',function(){if($(this).hasClass('icon-arrows-up')){$(this).removeClass('icon-arrows-up').addClass('icon-arrows-down');$(this).parent().next().css({display:'none'});if($(this).hasClass('special-header-collapse-expand')){$('.separate-section-story-wrapper').addClass('top-20px');}}else{if($(this).hasClass('icon-arrows-down')){$(this).removeClass('icon-arrows-down').addClass('icon-arrows-up');$(this).parent().next().css({display:'block'});if($(this).hasClass('special-header-collapse-expand')){$('.separate-section-story-wrapper').removeClass('top-20px');}}}})
function updateMainSlider(dataList){var width=$('#jssor_1').width();var beginString='<div data-u="slides" style="cursor:default;position:relative;top:0px;left:0px;width: '+width+'px;height:'+width+'px;overflow:hidden;">';for(var i=0;i<dataList.length;i++){var image='<div>'+
'<img style="object-fit: cover;" data-u="image" src="'+dataList[i].link+'" />'+
'<img  data-u="thumb" style="width: 90px; height: 90px; min-width: 90px; max-width: 90px; min-height: 90px; max-height: 90px;" src="'+dataList[i].link+'"/>'+
'</div>';beginString+=image;}
var endString='</div>'+
'<div data-u="thumbnavigator" class="jssort101" style="position:absolute;left:0px;bottom: 0px;width:980px;height:100px;background-color:#000;" data-autocenter="1" data-scale-bottom="0.75">'+
'<div data-u="slides">'+
'<div data-u="prototype" class="p" style="width:90px;height:90px;">'+
'<div data-u="thumbnailtemplate" class="t"></div>'+
'</div>'+
'</div>'+
'</div>'+
'<div data-u="arrowleft" class="jssora106" style="width:55px;height:55px;top:200px;left:10px;" data-scale="0.75">'+
'<div><span class="icon icon-arrows-left" style="position:absolute;top:0;left:0;width:100%;height:100%; font-size: 36px; color: #ffffff"></span></div>'+
'</div>'+
'<div data-u="arrowright" class="jssora106" style="width:55px;height:55px;top:200px;right:0px;" data-scale="0.75">'+
'<div><span class="icon icon-arrows-right" style="position:absolute;top:0;left:0;width:100%;height:100%; font-size: 36px; color: #ffffff"></span></div>'+
'</div>';return beginString+endString;}})})();